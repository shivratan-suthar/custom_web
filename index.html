<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Style External Page</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: white;
      padding: 20px;
    }
    iframe {
      width: 100%;
      height: 80vh;
      border: 1px solid #ccc;
      margin-top: 20px;
    }
    label {
      display: inline-block;
      width: 150px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h2>Style an External Webpage</h2>

  <label>Enter Page URL:</label>
  <input type="text" id="urlInput" value="https://example.com" size="50" />
  <br>

  <label>Text Color:</label>
  <input type="color" id="textColor" value="#00ff00" />
  <br>

  <label>Background Color:</label>
  <input type="color" id="bgColor" value="#000000" />
  <br>

  <label>Text Size:</label>
  <select id="textSize">
    <option value="14px">14px</option>
    <option value="16px" selected>16px</option>
    <option value="18px">18px</option>
    <option value="20px">20px</option>
    <option value="24px">24px</option>
    <option value="30px">30px</option>
  </select>
  <br><br>

  <button onclick="loadAndStylePage()">Load and Style Page</button>

  <iframe id="previewFrame"></iframe>

  <script>
    async function loadAndStylePage() {
      const url = document.getElementById('urlInput').value;
      const textColor = document.getElementById('textColor').value;
      const bgColor = document.getElementById('bgColor').value;
      const textSize = document.getElementById('textSize').value;

      const proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url);

      try {
        const response = await fetch(proxyUrl);
        let html = await response.text();

        const styleTag = `
          <style>
            * {
              background-color: ${bgColor} !important;
              color: ${textColor} !important;
              font-size: ${textSize} !important;
            }
          </style>
        `;

        html = html.replace(/<head.*?>/, match => match + styleTag);

        const blob = new Blob([html], { type: 'text/html' });
        const blobUrl = URL.createObjectURL(blob);

        document.getElementById('previewFrame').src = blobUrl;
      } catch (e) {
        alert('Error loading URL. Try a different one or check your connection.');
        console.error(e);
      }
    }
  </script>
</body>
</html>
